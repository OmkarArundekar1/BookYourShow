<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}BookYourShow - Premium Cinema Experience{% endblock %}
    </title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome 6 -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />

    <!-- Swiper.js for Carousels -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <!-- AOS - Animate On Scroll -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link
      href="{{ url_for('static', filename='css/style.css') }}"
      rel="stylesheet"
    />

    {% if session.role == 'admin' %}
    <link
      href="{{ url_for('static', filename='css/admin.css') }}"
      rel="stylesheet"
    />
    {% endif %} {% block extra_head %}{% endblock %}
  </head>

  <body class="page-transition">
    <!-- Premium Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" id="mainNavbar">
      <div class="container-fluid px-4">
        <a class="navbar-brand" href="{{ url_for('index') }}">
          <i class="fas fa-film me-2"></i
          ><span class="text-gradient-red">BookYourShow</span>
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a
                class="nav-link {% if request.endpoint == 'index' %}active{% endif %}"
                href="{{ url_for('index') }}"
              >
                <i class="fas fa-home me-1"></i>Home
              </a>
            </li>
            {% if session.user_id %} {% if session.role == 'admin' %}
            <li class="nav-item">
              <a
                class="nav-link {% if 'admin' in request.endpoint %}active{% endif %}"
                href="{{ url_for('admin_dashboard') }}"
              >
                <i class="fas fa-tachometer-alt me-1"></i>Dashboard
              </a>
            </li>
            {% else %}
            <li class="nav-item">
              <a
                class="nav-link {% if request.endpoint == 'my_bookings' %}active{% endif %}"
                href="{{ url_for('my_bookings') }}"
              >
                <i class="fas fa-ticket-alt me-1"></i>My Bookings
              </a>
            </li>
            {% endif %} {% endif %}
          </ul>

          <ul class="navbar-nav">
            {% if session.user_id %}
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle d-flex align-items-center"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <div class="user-avatar me-2">
                  <i class="fas fa-user-circle"></i>
                </div>
                <span>{{ session.name }}</span>
              </a>
              <ul
                class="dropdown-menu dropdown-menu-end glass-card"
                aria-labelledby="navbarDropdown"
              >
                <li>
                  <a class="dropdown-item" href="{{ url_for('logout') }}">
                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                  </a>
                </li>
              </ul>
            </li>
            {% else %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('login') }}">
                <i class="fas fa-sign-in-alt me-1"></i>Login
              </a>
            </li>
            <li class="nav-item">
              <a
                class="btn btn-primary btn-sm ms-2"
                href="{{ url_for('register') }}"
              >
                <i class="fas fa-user-plus me-1"></i>Sign Up
              </a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <div class="container-fluid px-4 mt-3">
      <div class="row">
        <div class="col-12">
          {% for category, message in messages %}
          <div
            class="alert alert-{{ 'danger' if category == 'error' else 'warning' if category == 'warning' else 'info' if category == 'info' else 'success' }} alert-dismissible fade show animate-fade-in-up"
            role="alert"
          >
            <i
              class="fas fa-{{ 'exclamation-circle' if category == 'error' else 'exclamation-triangle' if category == 'warning' else 'info-circle' if category == 'info' else 'check-circle' }} me-2"
            ></i>
            {{ message }}
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endif %} {% endwith %}

    <!-- Main Content -->
    <main>{% block content %}{% endblock %}</main>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
      <i class="fas fa-moon" id="themeIcon"></i>
    </button>

    <!-- Premium Footer -->
    <footer>
      <div class="container">
        <div class="row py-5">
          <div class="col-lg-4 mb-4 mb-lg-0">
            <h5 class="mb-3">
              <i class="fas fa-film me-2 text-gradient-red"></i>BookYourShow
            </h5>
            <p>
              Your premium destination for movie ticket booking. Experience
              cinema like never before.
            </p>
            <div class="social-links mt-3">
              <a href="#" class="me-3"><i class="fab fa-facebook-f"></i></a>
              <a href="#" class="me-3"><i class="fab fa-twitter"></i></a>
              <a href="#" class="me-3"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
          </div>
          <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
            <h6 class="mb-3">Quick Links</h6>
            <ul class="list-unstyled">
              <li class="mb-2">
                <a href="{{ url_for('index') }}" class="text-decoration-none"
                  >Home</a
                >
              </li>
              <li class="mb-2">
                <a href="#" class="text-decoration-none">Movies</a>
              </li>
              <li class="mb-2">
                <a href="#" class="text-decoration-none">Theaters</a>
              </li>
              <li class="mb-2">
                <a href="#" class="text-decoration-none">About Us</a>
              </li>
            </ul>
          </div>
          <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
            <h6 class="mb-3">Support</h6>
            <ul class="list-unstyled">
              <li class="mb-2">
                <a href="#" class="text-decoration-none">Help Center</a>
              </li>
              <li class="mb-2">
                <a href="#" class="text-decoration-none">Contact Us</a>
              </li>
              <li class="mb-2">
                <a href="#" class="text-decoration-none">FAQs</a>
              </li>
              <li class="mb-2">
                <a href="#" class="text-decoration-none">Terms & Conditions</a>
              </li>
            </ul>
          </div>
          <div class="col-lg-4 col-md-4">
            <h6 class="mb-3">Newsletter</h6>
            <p class="small">
              Subscribe to get updates on new releases and exclusive offers.
            </p>
            <div class="input-group">
              <input
                type="email"
                class="form-control"
                placeholder="Your email"
              />
              <button class="btn btn-primary" type="button">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
        <hr class="my-4" style="border-color: rgba(255, 255, 255, 0.1)" />
        <div class="row">
          <div class="col-12 text-center">
            <p class="mb-0">
              &copy; 2024 BookYourShow. All rights reserved. | Premium Cinema
              Experience
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Swiper.js -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!-- AOS - Animate On Scroll -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <script>
      // Initialize AOS
      AOS.init({
        duration: 800,
        easing: "ease-in-out",
        once: true,
      });

      // Navbar scroll effect
      window.addEventListener("scroll", function () {
        const navbar = document.getElementById("mainNavbar");
        if (window.scrollY > 50) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });

      // Theme Toggle Functionality
      (function () {
        const themeToggle = document.getElementById("themeToggle");
        const themeIcon = document.getElementById("themeIcon");
        const html = document.documentElement;

        // Get saved theme or default to light
        const currentTheme = localStorage.getItem("theme") || "light";
        html.setAttribute("data-theme", currentTheme);
        updateThemeIcon(currentTheme);

        themeToggle.addEventListener("click", function () {
          const currentTheme = html.getAttribute("data-theme");
          const newTheme = currentTheme === "dark" ? "light" : "dark";

          html.setAttribute("data-theme", newTheme);
          localStorage.setItem("theme", newTheme);
          updateThemeIcon(newTheme);

          // Add animation
          themeToggle.style.transform = "rotate(360deg)";
          setTimeout(() => {
            themeToggle.style.transform = "";
          }, 300);
        });

        function updateThemeIcon(theme) {
          if (theme === "dark") {
            themeIcon.classList.remove("fa-moon");
            themeIcon.classList.add("fa-sun");
          } else {
            themeIcon.classList.remove("fa-sun");
            themeIcon.classList.add("fa-moon");
          }
        }
      })();
    </script>

    {% block extra_scripts %}{% endblock %}
  </body>
</html>
